@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  
  /* ─────────────────────────────────────────────────────────── */
  /*  TRANSITIONS CINÉMATIQUES                                   */
  /* ─────────────────────────────────────────────────────────── */
  
  /* ENTRÉE : Arrive du bas, devient net */
  .page-enter {
    animation: pageEnterAnim 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    transform-origin: center top;
  }

  /* SORTIE : Recule, devient flou et disparait */
  .page-exit {
    animation: pageExitAnim 0.3s cubic-bezier(0.4, 0.0, 1, 1) forwards;
    pointer-events: none;
    transform-origin: center top;
  }

  @keyframes pageEnterAnim {
    0% {
      opacity: 0;
      transform: translateY(30px) scale(0.98);
      filter: blur(5px);
    }
    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: blur(0);
    }
  }

  @keyframes pageExitAnim {
    0% {
      opacity: 1;
      transform: scale(1);
      filter: blur(0);
    }
    100% {
      opacity: 0;
      transform: scale(0.95);
      filter: blur(5px);
    }
  }

  /* ─────────────────────────────────────────────────────────── */
  /*  AUTRES                                                     */
  /* ─────────────────────────────────────────────────────────── */
  
  .skeleton { @apply bg-white/5 rounded-md relative overflow-hidden; }
  .skeleton::after { content: ""; @apply absolute inset-0; background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.05) 50%, transparent 100%); animation: shimmer 1.5s infinite; }
  @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

  /* Rank Glow - Couleur par défaut si variable absente */
  .rank-icon { 
      filter: drop-shadow(0 0 10px var(--rank-color, rgba(255,255,255,0.3))); 
      transition: all 0.3s ease; 
  }
  .rank-icon:hover { 
      filter: drop-shadow(0 0 20px var(--rank-color, rgba(255,255,255,0.8))); 
      transform: scale(1.15); 
  }

  .toast-container { @apply fixed bottom-6 right-6 z-50 flex flex-col gap-3 pointer-events-none; }
  .toast { @apply bg-gray-900/90 backdrop-blur-xl border border-white/10 text-white px-5 py-4 rounded-xl shadow-2xl flex items-center gap-3 pointer-events-auto transform transition-all duration-300 ease-out; animation: toastSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); min-width: 300px; }
  .toast.hiding { opacity: 0; transform: translateX(20px) scale(0.95); }
  @keyframes toastSlideIn { from { opacity: 0; transform: translateY(20px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }

  .btn-glass { @apply px-5 py-2 rounded-full font-semibold text-white bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/30 backdrop-blur-md transition-all duration-200 ease-out; }
  .btn-glass:active { @apply scale-95 opacity-80; }
  .btn-liquid-press:active { @apply scale-95 opacity-90; }
  
  /* On garde animate-spring-in pour les éléments internes (cartes) */
  .animate-spring-in { animation: pageEnterAnim 0.7s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; opacity: 0; }

  .liquid-glass-card { background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.1)); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); border-top: 1px solid rgba(255, 255, 255, 0.15); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3); @apply text-gray-100; transform-style: preserve-3d; transition: border-color 0.3s ease; }
  input, textarea, select { @apply bg-black/30 border border-white/10 text-white placeholder-gray-500 focus:bg-black/50 focus:border-pink-500/50 focus:ring-1 focus:ring-pink-500/50 focus:outline-none transition-colors duration-200 !important; }
}